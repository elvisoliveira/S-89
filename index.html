<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>S-89 Online</title>
        <script src="https://unpkg.com/pdfjs-dist@2.6.347/build/pdf.js"></script>
    </head>
    <body>
        <input type="file" />
        <script type="text/javascript">
            document.querySelector('input').addEventListener('change', function() {
                var reader = new FileReader();
                reader.onload = function() {
                    pdfjsLib.disableWorker = true;
                    pdfjsLib.getDocument({
                        data: new Uint8Array(this.result)
                    }).promise.then(pdf => {
                        const fillIn = {};
                        fillIn["12R"] = 'test';
                        pdf.saveDocument({
                          getAll: () => fillIn,
                          resetModified: () => {},
                        }).then(byteArray => {
                            var file = new Blob([byteArray], { type: 'application/pdf;base64' });
                            var fileURL = URL.createObjectURL(file);
                            window.open(fileURL);
                        });
                    });
                }
                reader.readAsArrayBuffer(this.files[0]);
            }, false);
        </script>
    </body>
</html>
